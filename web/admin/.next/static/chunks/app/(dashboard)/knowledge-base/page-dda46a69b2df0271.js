(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9357],{11390:(e,s,t)=>{Promise.resolve().then(t.bind(t,83127))},83127:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>H});var a=t(95155),r=t(12115),l=t(35906),n=t(39556),i=t(25848),d=t(20853),c=t(33473),o=t(93467),m=t(75231),x=t(73312),u=t(33900),h=t(87081),p=t(37528),f=t(85534),j=t(61556),g=t(48173),w=t.n(g),b=t(14081),y=t(86122),N=t(51055),v=t(60872),A=t(21773),C=t(45686),S=t(22130),k=t(25121),E=t(57485),R=t(21567);let F={faq:o.A,documents:b.A,website:y.A},T={faq:"FAQ",documents:"Documents",website:"Website"},I={active:"success",syncing:"warning",error:"error"};function _(e){let{knowledgeBase:s,onEdit:t,onDelete:r,onRegenerate:l,isRegenerating:n}=e,i=F[s.type]||o.A;return(0,a.jsxs)(S.Zp,{className:"group transition-colors hover:border-primary/30",children:[(0,a.jsx)(S.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:(0,a.jsx)(i,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w(),{href:"/knowledge-base/".concat(s.id),className:"font-medium hover:text-primary hover:underline",children:s.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(k.E,{variant:"secondary",className:"text-xs",children:T[s.type]}),(0,a.jsx)(k.E,{variant:I[s.status],className:"text-xs",children:s.status})]})]})]}),(0,a.jsxs)(E.rI,{children:[(0,a.jsx)(E.ty,{asChild:!0,children:(0,a.jsx)(x.$,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100",children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(E.SQ,{align:"end",children:[(0,a.jsx)(E._2,{asChild:!0,children:(0,a.jsxs)(w(),{href:"/knowledge-base/".concat(s.id),children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"View Items"]})}),(0,a.jsx)(E._2,{asChild:!0,children:(0,a.jsxs)(w(),{href:"/knowledge-base/".concat(s.id,"/search"),children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Test Search"]})}),(0,a.jsx)(E.mB,{}),(0,a.jsxs)(E._2,{onClick:t,children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(E._2,{onClick:l,disabled:n,children:[(0,a.jsx)(A.A,{className:"mr-2 h-4 w-4 ".concat(n?"animate-spin":"")}),"Regenerate Embeddings"]}),(0,a.jsx)(E.mB,{}),(0,a.jsxs)(E._2,{onClick:r,className:"text-destructive",children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}),(0,a.jsxs)(S.Wu,{children:[s.description&&(0,a.jsx)("p",{className:"mb-3 text-sm text-muted-foreground line-clamp-2",children:s.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:[s.item_count," items"]}),s.last_sync_at?(0,a.jsxs)("span",{children:["Synced ",(0,R.mo)(s.last_sync_at)]}):(0,a.jsx)("span",{children:"Never synced"})]})]})]})}var q=t(69606),D=t(37177),B=t(4563),O=t(51344),M=t(44870),P=t(46754),K=t(65564);let Q=B.Ik({name:B.Yj().min(1,"Name is required").max(100,"Name must be 100 characters or less"),description:B.Yj().max(500,"Description must be 500 characters or less").optional(),type:B.k5(["faq","documents","website"],{required_error:"Please select a type"})});function V(e){let{open:s,onOpenChange:t,knowledgeBase:n}=e,d=(0,l.jE)(),c=!!n,o=(0,q.mN)({resolver:(0,D.u)(Q),defaultValues:{name:"",description:"",type:"faq"}});(0,r.useEffect)(()=>{s&&(n?o.reset({name:n.name,description:n.description||"",type:n.type}):o.reset({name:"",description:"",type:"faq"}))},[s,n,o]);let m=(0,i.n)({mutationFn:e=>f.FH.post("/knowledge-bases",e),onSuccess:()=>{d.invalidateQueries({queryKey:j.lH.knowledgeBases.all}),(0,K.oR)({title:"Knowledge base created",description:"Your knowledge base has been created successfully."}),t(!1)},onError:e=>{(0,K.oR)({title:"Error",description:e.message||"Failed to create knowledge base",variant:"error"})}}),h=(0,i.n)({mutationFn:e=>f.FH.put("/knowledge-bases/".concat(null==n?void 0:n.id),e),onSuccess:()=>{d.invalidateQueries({queryKey:j.lH.knowledgeBases.all}),(0,K.oR)({title:"Knowledge base updated",description:"Your knowledge base has been updated successfully."}),t(!1)},onError:e=>{(0,K.oR)({title:"Error",description:e.message||"Failed to update knowledge base",variant:"error"})}}),g=m.isPending||h.isPending;return(0,a.jsx)(O.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(O.Cf,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(O.c7,{children:[(0,a.jsx)(O.L3,{children:c?"Edit Knowledge Base":"Create Knowledge Base"}),(0,a.jsx)(O.rr,{children:c?"Update the details of your knowledge base.":"Create a new knowledge base to store FAQs, documents, or website content for AI-powered responses."})]}),(0,a.jsx)(M.lV,{...o,children:(0,a.jsxs)("form",{onSubmit:o.handleSubmit(e=>{c?h.mutate({name:e.name,description:e.description}):m.mutate({name:e.name,description:e.description,type:e.type})}),className:"space-y-4",children:[(0,a.jsx)(M.zB,{control:o.control,name:"name",render:e=>{let{field:s}=e;return(0,a.jsxs)(M.eI,{children:[(0,a.jsx)(M.lR,{children:"Name"}),(0,a.jsx)(M.MJ,{children:(0,a.jsx)(u.p,{placeholder:"e.g., Product FAQ",...s})}),(0,a.jsx)(M.C5,{})]})}}),(0,a.jsx)(M.zB,{control:o.control,name:"description",render:e=>{let{field:s}=e;return(0,a.jsxs)(M.eI,{children:[(0,a.jsx)(M.lR,{children:"Description"}),(0,a.jsx)(M.MJ,{children:(0,a.jsx)(P.T,{placeholder:"Describe what this knowledge base contains...",className:"resize-none",rows:3,...s})}),(0,a.jsx)(M.Rr,{children:"A brief description to help identify this knowledge base."}),(0,a.jsx)(M.C5,{})]})}}),(0,a.jsx)(M.zB,{control:o.control,name:"type",render:e=>{let{field:s}=e;return(0,a.jsxs)(M.eI,{children:[(0,a.jsx)(M.lR,{children:"Type"}),(0,a.jsxs)(p.l6,{onValueChange:s.onChange,defaultValue:s.value,disabled:c,children:[(0,a.jsx)(M.MJ,{children:(0,a.jsx)(p.bq,{children:(0,a.jsx)(p.yv,{placeholder:"Select a type"})})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:"faq",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"FAQ"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Question and answer pairs"})]})}),(0,a.jsx)(p.eb,{value:"documents",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Documents"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"PDF, Word, or text documents"})]})}),(0,a.jsx)(p.eb,{value:"website",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Website"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Crawled website content"})]})})]})]}),c&&(0,a.jsx)(M.Rr,{children:"Type cannot be changed after creation."}),(0,a.jsx)(M.C5,{})]})}}),(0,a.jsxs)(O.Es,{children:[(0,a.jsx)(x.$,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,a.jsx)(x.$,{type:"submit",disabled:g,children:g?"Saving...":c?"Save Changes":"Create"})]})]})})]})})}function H(){let[e,s]=(0,r.useState)(""),[t,g]=(0,r.useState)("all"),[w,b]=(0,r.useState)("all"),[y,N]=(0,r.useState)(!1),[v,A]=(0,r.useState)(null),C=(0,l.jE)(),{data:S,isLoading:k}=(0,n.I)({queryKey:j.lH.knowledgeBases.list({search:e,type:t,status:w}),queryFn:()=>f.FH.get("/knowledge-bases",{...e&&{search:e},..."all"!==t&&{type:t},..."all"!==w&&{status:w}})}),E=(0,i.n)({mutationFn:e=>f.FH.delete("/knowledge-bases/".concat(e)),onSuccess:()=>{C.invalidateQueries({queryKey:j.lH.knowledgeBases.all})}}),R=(0,i.n)({mutationFn:e=>f.FH.post("/knowledge-bases/".concat(e,"/regenerate-embeddings")),onSuccess:()=>{C.invalidateQueries({queryKey:j.lH.knowledgeBases.all})}}),F=(null==S?void 0:S.data)||[],T=e=>{A(e),N(!0)},I=async e=>{confirm('Are you sure you want to delete "'.concat(e.name,'"? This will also delete all items in this knowledge base.'))&&await E.mutateAsync(e.id)},q=async e=>{await R.mutateAsync(e.id)};return(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsx)(m.Y,{title:"Knowledge Base"}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-1 items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative max-w-sm flex-1",children:[(0,a.jsx)(d.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(u.p,{placeholder:"Search knowledge bases...",value:e,onChange:e=>s(e.target.value),className:"pl-9"})]}),(0,a.jsxs)(p.l6,{value:t,onValueChange:e=>g(e),children:[(0,a.jsx)(p.bq,{className:"w-[140px]",children:(0,a.jsx)(p.yv,{placeholder:"Type"})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:"all",children:"All Types"}),(0,a.jsx)(p.eb,{value:"faq",children:"FAQ"}),(0,a.jsx)(p.eb,{value:"documents",children:"Documents"}),(0,a.jsx)(p.eb,{value:"website",children:"Website"})]})]}),(0,a.jsxs)(p.l6,{value:w,onValueChange:e=>b(e),children:[(0,a.jsx)(p.bq,{className:"w-[140px]",children:(0,a.jsx)(p.yv,{placeholder:"Status"})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:"all",children:"All Status"}),(0,a.jsx)(p.eb,{value:"active",children:"Active"}),(0,a.jsx)(p.eb,{value:"syncing",children:"Syncing"}),(0,a.jsx)(p.eb,{value:"error",children:"Error"})]})]})]}),(0,a.jsxs)(x.$,{onClick:()=>N(!0),children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"New Knowledge Base"]})]}),k?(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,s)=>(0,a.jsxs)("div",{className:"rounded-lg border border-border bg-card p-4",children:[(0,a.jsx)(h.EA,{className:"mb-4 h-10 w-10 rounded-lg"}),(0,a.jsx)(h.EA,{className:"mb-2 h-5 w-3/4"}),(0,a.jsx)(h.EA,{className:"mb-4 h-4 w-full"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.EA,{className:"h-5 w-16"}),(0,a.jsx)(h.EA,{className:"h-5 w-20"})]})]},s))}):0===F.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)(o.A,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground/50"}),(0,a.jsx)("h3",{className:"mb-2 text-lg font-medium",children:"No knowledge bases yet"}),(0,a.jsx)("p",{className:"mb-4 text-sm text-muted-foreground",children:"Create your first knowledge base to power AI-assisted responses."}),(0,a.jsxs)(x.$,{onClick:()=>N(!0),children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Create Knowledge Base"]})]}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:F.map(e=>(0,a.jsx)(_,{knowledgeBase:e,onEdit:()=>T(e),onDelete:()=>I(e),onRegenerate:()=>q(e),isRegenerating:R.isPending&&R.variables===e.id},e.id))})]}),(0,a.jsx)(V,{open:y,onOpenChange:()=>{N(!1),A(null)},knowledgeBase:v})]})}},44870:(e,s,t)=>{"use strict";t.d(s,{C5:()=>g,MJ:()=>f,Rr:()=>j,eI:()=>h,lR:()=>p,lV:()=>c,zB:()=>m});var a=t(95155),r=t(12115),l=t(12317),n=t(69606),i=t(21567),d=t(98986);let c=n.Op,o=r.createContext({}),m=e=>{let{...s}=e;return(0,a.jsx)(o.Provider,{value:{name:s.name},children:(0,a.jsx)(n.xI,{...s})})},x=()=>{let e=r.useContext(o),s=r.useContext(u),{getFieldState:t,formState:a}=(0,n.xW)(),l=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=s;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},u=r.createContext({}),h=r.forwardRef((e,s)=>{let{className:t,...l}=e,n=r.useId();return(0,a.jsx)(u.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:s,className:(0,i.cn)("space-y-2",t),...l})})});h.displayName="FormItem";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e,{error:l,formItemId:n}=x();return(0,a.jsx)(d.J,{ref:s,className:(0,i.cn)(l&&"text-destructive",t),htmlFor:n,...r})});p.displayName="FormLabel";let f=r.forwardRef((e,s)=>{let{...t}=e,{error:r,formItemId:n,formDescriptionId:i,formMessageId:d}=x();return(0,a.jsx)(l.DX,{ref:s,id:n,"aria-describedby":r?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!r,...t})});f.displayName="FormControl";let j=r.forwardRef((e,s)=>{let{className:t,...r}=e,{formDescriptionId:l}=x();return(0,a.jsx)("p",{ref:s,id:l,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});j.displayName="FormDescription";let g=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e,{error:n,formMessageId:d}=x(),c=n?String(null==n?void 0:n.message):r;return c?(0,a.jsx)("p",{ref:s,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",t),...l,children:c}):null});g.displayName="FormMessage"},37528:(e,s,t)=>{"use strict";t.d(s,{bq:()=>x,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>m});var a=t(95155),r=t(12115),l=t(58012),n=t(51719),i=t(91902),d=t(98867),c=t(21567);let o=l.bL;l.YJ;let m=l.WT,x=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=l.l9.displayName;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=l.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let p=r.forwardRef((e,s)=>{let{className:t,children:r,position:n="popper",...i}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-border bg-card text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(u,{}),(0,a.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});p.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});f.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.wv.displayName},65564:(e,s,t)=>{"use strict";t.d(s,{Kf:()=>u,dj:()=>x,oR:()=>m});var a=t(12115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},5e3);l.set(e,s)},i=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=i(c,e),d.forEach(e=>{e(c)})}function m(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let[e,s]=a.useState(c);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}let u=(e,s)=>m({title:e,description:s,variant:"error"})},61786:(e,s,t)=>{"use strict";function a(e,[s,t]){return Math.min(t,Math.max(s,e))}t.d(s,{q:()=>a})}},e=>{var s=s=>e(e.s=s);e.O(0,[2361,8233,7778,6299,9556,3454,7866,6987,8173,384,6393,6622,4580,1306,8441,1517,7358],()=>s(11390)),_N_E=e.O()}]);