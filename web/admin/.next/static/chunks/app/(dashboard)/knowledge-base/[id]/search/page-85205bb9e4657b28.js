(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3518],{37397:(e,s,a)=>{Promise.resolve().then(a.bind(a,24477))},24477:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>S});var r=a(95155),t=a(12115),l=a(76046),n=a(48173),i=a.n(n),d=a(39556),o=a(25848),c=a(87364),m=a(30098),u=a(20853),x=a(91902),h=a(51719),f=a(75231),p=a(73312),g=a(33900),j=a(22130),b=a(25121),v=a(58251),N=a(21567);let y=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsxs)(v.bL,{ref:s,className:(0,N.cn)("relative flex w-full touch-none select-none items-center",a),...t,children:[(0,r.jsx)(v.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(v.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(v.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});y.displayName=v.bL.displayName;var w=a(87081),C=a(85534),k=a(61556);function S(){var e,s;let a=(0,l.useParams)().id,[n,v]=(0,t.useState)(""),[N,S]=(0,t.useState)(5),[A,R]=(0,t.useState)(new Set),{data:E,isLoading:P}=(0,d.I)({queryKey:k.lH.knowledgeBases.detail(a),queryFn:()=>C.FH.get("/knowledge-bases/".concat(a))}),O=(0,o.n)({mutationFn:e=>{let{query:s,limit:r}=e;return C.FH.post("/knowledge-bases/".concat(a,"/search"),{query:s,limit:r})}}),_=()=>{n.trim()&&O.mutate({query:n.trim(),limit:N})},F=e=>{let s=new Set(A);s.has(e)?s.delete(e):s.add(e),R(s)},Z=e=>e>=.8?"text-success":e>=.6?"text-warning":"text-muted-foreground",q=e=>e>=.8?"Excellent match":e>=.6?"Good match":e>=.4?"Partial match":"Weak match";return(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)(f.Y,{title:"Test Search"}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[(0,r.jsxs)(i(),{href:"/knowledge-base/".concat(a),className:"mb-4 inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[(0,r.jsx)(c.A,{className:"mr-1 h-4 w-4"}),"Back to ",(null==E?void 0:E.name)||"Knowledge Base"]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_2fr]",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsxs)(j.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"h-5 w-5 text-primary"}),"Semantic Search"]})}),(0,r.jsxs)(j.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Query"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(g.p,{placeholder:"Enter your question...",value:n,onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_()}}),(0,r.jsx)(p.$,{onClick:_,disabled:O.isPending||!n.trim(),children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Results Limit"}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:N})]}),(0,r.jsx)(y,{value:[N],onValueChange:e=>S(e[0]),min:1,max:20,step:1})]}),E&&(0,r.jsxs)("div",{className:"rounded-lg bg-muted/50 p-3 text-sm",children:[(0,r.jsx)("p",{className:"font-medium",children:E.name}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:[E.item_count," items \xb7 ",E.type]})]})]})]}),(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsx)(j.ZB,{className:"text-sm",children:"Search Tips"})}),(0,r.jsxs)(j.Wu,{className:"text-sm text-muted-foreground space-y-2",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Natural language:"})," Ask questions as your customers would."]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Scoring:"})," Results are ranked by semantic similarity (0-100%)."]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"No embeddings?"})," If items lack embeddings, regenerate them from the knowledge base page."]})]})]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsxs)(j.ZB,{children:["Results",O.data&&(0,r.jsxs)(b.E,{variant:"secondary",className:"ml-2",children:[O.data.count," found"]})]})}),(0,r.jsx)(j.Wu,{children:O.isPending?(0,r.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,s)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(w.EA,{className:"h-4 w-3/4"}),(0,r.jsx)(w.EA,{className:"h-16 w-full"})]},s))}):(null===(e=O.data)||void 0===e?void 0:e.results.length)===0?(0,r.jsxs)("div",{className:"py-8 text-center text-muted-foreground",children:[(0,r.jsx)(u.A,{className:"mx-auto mb-4 h-12 w-12 opacity-50"}),(0,r.jsx)("p",{children:"No results found for your query."}),(0,r.jsx)("p",{className:"text-sm",children:"Try different keywords or check if items have embeddings."})]}):(null===(s=O.data)||void 0===s?void 0:s.results)?(0,r.jsx)("div",{className:"space-y-4",children:O.data.results.map((e,s)=>{let a=A.has(e.item.id),t=Math.round(100*e.score);return(0,r.jsx)("div",{className:"rounded-lg border border-border p-4 transition-colors hover:border-primary/30",children:(0,r.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["#",s+1]}),(0,r.jsxs)(b.E,{variant:"outline",className:Z(e.score),children:[t,"%"]}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:q(e.score)})]}),(0,r.jsx)("h4",{className:"font-medium",children:e.item.question}),(0,r.jsx)("p",{className:"mt-2 text-sm text-muted-foreground ".concat(a?"":"line-clamp-2"),children:e.item.answer}),e.item.answer.length>200&&(0,r.jsx)(p.$,{variant:"ghost",size:"sm",className:"mt-1 h-6 px-2",onClick:()=>F(e.item.id),children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{className:"mr-1 h-3 w-3"}),"Show less"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.A,{className:"mr-1 h-3 w-3"}),"Show more"]})}),e.item.keywords&&e.item.keywords.length>0&&(0,r.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.item.keywords.map(e=>(0,r.jsx)(b.E,{variant:"secondary",className:"text-xs",children:e},e))})]})})},e.item.id)})}):(0,r.jsxs)("div",{className:"py-8 text-center text-muted-foreground",children:[(0,r.jsx)(u.A,{className:"mx-auto mb-4 h-12 w-12 opacity-50"}),(0,r.jsx)("p",{children:"Enter a query to test semantic search."}),(0,r.jsx)("p",{className:"text-sm mt-1",children:"This uses vector embeddings to find semantically similar answers."})]})})]})})]})]})]})}},75231:(e,s,a)=>{"use strict";a.d(s,{Y:()=>c});var r=a(95155),t=a(20853),l=a(88218),n=a(35288),i=a(73312),d=a(53601),o=a(86435);function c(e){let{title:s}=e,a=(0,o.U4)(),c=(0,o.j_)(e=>e.setCommandPaletteOpen);return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b border-border bg-card px-6",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:s&&(0,r.jsx)("h1",{className:"text-xl font-semibold text-foreground",children:s})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(i.$,{variant:"outline",className:"hidden w-64 justify-start text-muted-foreground lg:flex",onClick:()=>c(!0),children:[(0,r.jsx)(t.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Search..."}),(0,r.jsxs)("kbd",{className:"ml-auto flex h-5 items-center gap-1 rounded border border-border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-3 w-3"}),"K"]})]}),(0,r.jsx)(d.S9,{content:"Search (Cmd+K)",children:(0,r.jsx)(i.$,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>c(!0),children:(0,r.jsx)(t.A,{className:"h-5 w-5"})})}),(0,r.jsx)(d.S9,{content:"Notifications",children:(0,r.jsxs)(i.$,{variant:"ghost",size:"icon",className:"relative",children:[(0,r.jsx)(n.A,{className:"h-5 w-5"}),a>0&&(0,r.jsx)("span",{className:"absolute right-1 top-1 flex h-4 w-4 items-center justify-center rounded-full bg-destructive text-[10px] font-bold text-white",children:a>9?"9+":a})]})})]})]})}},22130:(e,s,a)=>{"use strict";a.d(s,{BT:()=>m,Wu:()=>u,ZB:()=>c,Zp:()=>d,aR:()=>o});var r=a(95155),t=a(12115),l=a(31027),n=a(21567);let i=(0,l.F)("rounded-lg border bg-card text-card-foreground",{variants:{variant:{default:"border-border shadow-sm",terminal:"terminal-card",elevated:"border-border shadow-lg",ghost:"border-transparent bg-transparent",glow:"border-primary/30 glow-primary"}},defaultVariants:{variant:"default"}}),d=t.forwardRef((e,s)=>{let{className:a,variant:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)(i({variant:t}),a),...l})});d.displayName="Card";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...t})});o.displayName="CardHeader";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...t})});c.displayName="CardTitle";let m=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...t})});m.displayName="CardDescription";let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",a),...t})});u.displayName="CardContent",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",a),...t})}).displayName="CardFooter"},33900:(e,s,a)=>{"use strict";a.d(s,{p:()=>d});var r=a(95155),t=a(12115),l=a(31027),n=a(21567);let i=(0,l.F)("flex w-full rounded-md border bg-background px-3 py-2 text-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"border-input",terminal:"border-primary/50 bg-background font-mono focus:border-primary",error:"border-destructive focus-visible:ring-destructive"},inputSize:{default:"h-10",sm:"h-9 text-xs",lg:"h-11"}},defaultVariants:{variant:"default",inputSize:"default"}}),d=t.forwardRef((e,s)=>{let{className:a,variant:t,inputSize:l,type:d,error:o,leftIcon:c,rightIcon:m,...u}=e,x=o?"error":t;return c||m?(0,r.jsxs)("div",{className:"relative",children:[c&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:c}),(0,r.jsx)("input",{type:d,className:(0,n.cn)(i({variant:x,inputSize:l}),c&&"pl-10",m&&"pr-10",a),ref:s,...u}),m&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:m})]}):(0,r.jsx)("input",{type:d,className:(0,n.cn)(i({variant:x,inputSize:l,className:a})),ref:s,...u})});d.displayName="Input"},86435:(e,s,a)=>{"use strict";a.d(s,{U4:()=>d,VC:()=>i,hM:()=>n,j_:()=>l});var r=a(99827),t=a(60709);let l=(0,r.v)()((0,t.Zr)(e=>({sidebarCollapsed:!1,sidebarMobileOpen:!1,activeConversationId:null,commandPaletteOpen:!1,unreadCount:0,toggleSidebar:()=>e(e=>({sidebarCollapsed:!e.sidebarCollapsed})),setSidebarCollapsed:s=>e({sidebarCollapsed:s}),setSidebarMobileOpen:s=>e({sidebarMobileOpen:s}),setActiveConversation:s=>e({activeConversationId:s}),toggleCommandPalette:()=>e(e=>({commandPaletteOpen:!e.commandPaletteOpen})),setCommandPaletteOpen:s=>e({commandPaletteOpen:s}),setUnreadCount:s=>e({unreadCount:s}),incrementUnread:()=>e(e=>({unreadCount:e.unreadCount+1})),clearUnread:()=>e({unreadCount:0})}),{name:"ui-storage",storage:(0,t.KU)(()=>localStorage),partialize:e=>({sidebarCollapsed:e.sidebarCollapsed})})),n=()=>l(e=>e.sidebarCollapsed),i=()=>l(e=>e.activeConversationId),d=()=>l(e=>e.unreadCount)}},e=>{var s=s=>e(e.s=s);e.O(0,[2361,8233,7778,6299,9556,3454,8173,6850,4580,8441,1517,7358],()=>s(37397)),_N_E=e.O()}]);