(()=>{var e={};e.id=269,e.ids=[269],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},49417:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var n=t(70260),a=t(28203),r=t(25155),i=t.n(r),l=t(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["(dashboard)",{children:["conversations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,29142)),"/Users/edsonmartins/desenvolvimento/linktor/web/admin/src/app/(dashboard)/conversations/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58426)),"/Users/edsonmartins/desenvolvimento/linktor/web/admin/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,71354)),"/Users/edsonmartins/desenvolvimento/linktor/web/admin/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/Users/edsonmartins/desenvolvimento/linktor/web/admin/src/app/(dashboard)/conversations/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/conversations/page",pathname:"/conversations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},55760:(e,s,t)=>{Promise.resolve().then(t.bind(t,29142))},13904:(e,s,t)=>{Promise.resolve().then(t.bind(t,16824))},45037:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(41680).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4643:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(41680).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},15607:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(41680).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},87798:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(41680).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},68996:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(41680).A)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},54736:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(41680).A)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},16824:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>W});var n=t(45512),a=t(58009),r=t(33115),i=t(16873),l=t(7555),o=t(1372),c=t(37239),d=t(77722),u=t(39400),x=t(78447),h=t(67563),m=t(37637),p=t(97093),f=t(35223),j=t(44195),v=t(69586),y=t(63146),g=t(53863),b=t(64186),N=t(30191),w=t(4643),k=t(24849),A=t(41680);let _=(0,A.A)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var C=t(45037),M=t(94209);let S=(0,A.A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var E=t(87798),P=t(17033);let z=(0,A.A)("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]),O=(0,A.A)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var q=t(15607),R=t(54736),U=t(68996),K=t(32323),F=t(3271),$=t(73555),I=t(11948);function H({status:e}){switch(e){case"pending":return(0,n.jsx)(w.A,{className:"h-3 w-3 text-muted-foreground"});case"sent":return(0,n.jsx)(k.A,{className:"h-3 w-3 text-muted-foreground"});case"delivered":return(0,n.jsx)(_,{className:"h-3 w-3 text-muted-foreground"});case"read":return(0,n.jsx)(_,{className:"h-3 w-3 text-primary"});case"failed":return(0,n.jsx)(C.A,{className:"h-3 w-3 text-destructive"});default:return null}}function G({message:e,isOwn:s}){return(0,n.jsxs)("div",{className:(0,j.cn)("flex gap-2 max-w-[70%]",s?"ml-auto flex-row-reverse":""),children:[!s&&(0,n.jsx)(h.e,{fallback:"contact"===e.sender_type?"C":"S",size:"sm"}),(0,n.jsxs)("div",{className:(0,j.cn)("space-y-1",s&&"items-end"),children:[(0,n.jsx)("div",{className:(0,j.cn)("rounded-lg px-3 py-2",s?"message-outgoing":"message-incoming"),children:(0,n.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})}),(0,n.jsxs)("div",{className:(0,j.cn)("flex items-center gap-1 text-[10px] text-muted-foreground",s&&"justify-end"),children:[(0,n.jsx)("span",{children:(0,j.fw)(e.created_at)}),s&&(0,n.jsx)(H,{status:e.status})]})]})]})}function L({conversation:e}){return(0,n.jsxs)("div",{className:"flex h-16 items-center justify-between border-b border-border bg-card px-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(h.e,{fallback:e.contact?.name||"U",status:"open"===e.status?"online":"offline"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-medium",children:e.contact?.name||"Unknown Contact"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,n.jsx)(x.E,{variant:e.channel?.type||"secondary",className:"text-[10px] px-1.5 py-0",children:e.channel?.type}),(0,n.jsx)("span",{children:e.contact?.phone||e.contact?.email||"No contact info"})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(F.S9,{content:"Voice call",children:(0,n.jsx)(u.$,{variant:"ghost",size:"icon",children:(0,n.jsx)(M.A,{className:"h-4 w-4"})})}),(0,n.jsx)(F.S9,{content:"Video call",children:(0,n.jsx)(u.$,{variant:"ghost",size:"icon",children:(0,n.jsx)(S,{className:"h-4 w-4"})})}),(0,n.jsx)(F.S9,{content:"Contact info",children:(0,n.jsx)(u.$,{variant:"ghost",size:"icon",children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})}),(0,n.jsxs)(f.rI,{children:[(0,n.jsx)(f.ty,{asChild:!0,children:(0,n.jsx)(u.$,{variant:"ghost",size:"icon",children:(0,n.jsx)(P.A,{className:"h-4 w-4"})})}),(0,n.jsxs)(f.SQ,{align:"end",children:[(0,n.jsx)(f._2,{children:"Resolve conversation"}),(0,n.jsx)(f._2,{children:"Assign to agent"}),(0,n.jsx)(f._2,{children:"Snooze"}),(0,n.jsx)(f.mB,{}),(0,n.jsx)(f._2,{className:"text-destructive",children:"Delete conversation"})]})]})]})]})}function Q({typingUsers:e}){if(0===e.length)return null;let s=e.map(e=>e.user_name||"Someone").join(", ");return(0,n.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 text-xs text-muted-foreground animate-pulse",children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-muted-foreground animate-bounce [animation-delay:-0.3s]"}),(0,n.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-muted-foreground animate-bounce [animation-delay:-0.15s]"}),(0,n.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-muted-foreground animate-bounce"})]}),(0,n.jsxs)("span",{children:[s," ",1===e.length?"is":"are"," typing..."]})]})}function D({conversationId:e,onSend:s,onTyping:t,isSending:r}){let[i,l]=(0,a.useState)(""),o=(0,a.useRef)(null),c=e=>{e.preventDefault(),i.trim()&&!r&&(t(!1),s(i.trim()),l(""))};return(0,n.jsx)("form",{onSubmit:c,className:"border-t border-border bg-card p-4",children:(0,n.jsxs)("div",{className:"flex items-end gap-2",children:[(0,n.jsx)(F.S9,{content:"Attach file",children:(0,n.jsx)(u.$,{type:"button",variant:"ghost",size:"icon",children:(0,n.jsx)(z,{className:"h-5 w-5"})})}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(d.p,{placeholder:"Type a message...",value:i,onChange:e=>{l(e.target.value),t(!0),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{t(!1)},2e3)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c(e))},variant:"terminal",className:"min-h-[40px]"})}),(0,n.jsx)(F.S9,{content:"Emoji",children:(0,n.jsx)(u.$,{type:"button",variant:"ghost",size:"icon",children:(0,n.jsx)(O,{className:"h-5 w-5"})})}),(0,n.jsx)(u.$,{type:"submit",size:"icon",disabled:!i.trim()||r,loading:r,children:(0,n.jsx)(q.A,{className:"h-5 w-5"})})]})})}function T({conversationId:e}){let s=(0,b.jE)(),t=(0,$.Jd)(),i=(0,a.useRef)(null),[l,o]=(0,a.useState)([]),{connectionState:c,subscribe:d,sendTyping:u}=(0,I.Iw)(),{data:x,isLoading:h}=(0,r.I)({queryKey:y.lH.conversations.detail(e),queryFn:()=>v.FH.get(`/conversations/${e}`)}),{data:f,isLoading:g}=(0,r.I)({queryKey:y.lH.messages.list(e),queryFn:()=>v.FH.get(`/conversations/${e}/messages`)}),w=f?.data||[],k=(0,N.n)({mutationFn:s=>v.FH.post(`/conversations/${e}/messages`,{content:s,content_type:"text"}),onSuccess:()=>{s.invalidateQueries({queryKey:y.lH.messages.list(e)}),s.invalidateQueries({queryKey:y.lH.conversations.detail(e)})}}),A=(0,a.useCallback)(s=>{u(e,s)},[e,u]);return h?(0,n.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,n.jsxs)("div",{className:"flex h-16 items-center gap-3 border-b border-border bg-card px-4",children:[(0,n.jsx)(p.EA,{className:"h-10 w-10 rounded-full"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(p.EA,{className:"h-4 w-32"}),(0,n.jsx)(p.EA,{className:"h-3 w-24"})]})]}),(0,n.jsx)("div",{className:"flex-1 p-4 space-y-4",children:Array.from({length:5}).map((e,s)=>(0,n.jsxs)("div",{className:(0,j.cn)("flex gap-2",s%2==0?"":"justify-end"),children:[s%2==0&&(0,n.jsx)(p.EA,{className:"h-8 w-8 rounded-full"}),(0,n.jsx)(p.EA,{className:(0,j.cn)("h-16 rounded-lg",s%2==0?"w-48":"w-56")})]},s))})]}):x?(0,n.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,n.jsx)(L,{conversation:x}),"connected"!==c&&(0,n.jsx)("div",{className:(0,j.cn)("flex items-center justify-center gap-2 py-1 text-xs","connecting"===c||"reconnecting"===c?"bg-yellow-500/10 text-yellow-500":"bg-destructive/10 text-destructive"),children:"connecting"===c||"reconnecting"===c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.A,{className:"h-3 w-3 animate-pulse"}),(0,n.jsx)("span",{children:"Connecting..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.A,{className:"h-3 w-3"}),(0,n.jsx)("span",{children:"Disconnected - Messages may be delayed"})]})}),(0,n.jsx)(m.F,{className:"flex-1 bg-background",children:(0,n.jsxs)("div",{className:"p-4 space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(K.w,{className:"flex-1"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,j.Yq)(x.created_at)}),(0,n.jsx)(K.w,{className:"flex-1"})]}),g?Array.from({length:5}).map((e,s)=>(0,n.jsxs)("div",{className:(0,j.cn)("flex gap-2",s%2==0?"":"justify-end"),children:[s%2==0&&(0,n.jsx)(p.EA,{className:"h-8 w-8 rounded-full"}),(0,n.jsx)(p.EA,{className:(0,j.cn)("h-16 rounded-lg",s%2==0?"w-48":"w-56")})]},s)):w.length>0?w.map(e=>(0,n.jsx)(G,{message:e,isOwn:"user"===e.sender_type&&e.sender_id===t?.id},e.id)):(0,n.jsxs)("div",{className:"py-8 text-center text-muted-foreground",children:[(0,n.jsx)("p",{className:"text-sm",children:"No messages yet"}),(0,n.jsx)("p",{className:"text-xs",children:"Start the conversation by sending a message"})]}),(0,n.jsx)("div",{ref:i})]})}),(0,n.jsx)(Q,{typingUsers:l}),(0,n.jsx)(D,{conversationId:e,onSend:e=>k.mutate(e),onTyping:A,isSending:k.isPending})]}):(0,n.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,n.jsx)("p",{className:"text-muted-foreground",children:"Conversation not found"})})}let V=[{label:"All",value:"all"},{label:"Open",value:"open"},{label:"Pending",value:"pending"},{label:"Resolved",value:"resolved"},{label:"Snoozed",value:"snoozed"}];function B({conversation:e,isActive:s,onClick:t}){return(0,n.jsxs)("button",{onClick:t,className:(0,j.cn)("flex w-full items-start gap-3 rounded-lg p-3 text-left transition-colors",s?"bg-primary/10 border border-primary/30":"hover:bg-secondary/50"),children:[(0,n.jsx)(h.e,{fallback:e.contact?.name||"U",size:"default",status:"open"===e.status?"online":"offline"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,n.jsx)("span",{className:"font-medium truncate",children:e.contact?.name||"Unknown Contact"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground shrink-0",children:e.last_message_at?(0,j.fw)(e.last_message_at):"-"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,n.jsx)(x.E,{variant:e.channel?.type||"secondary",className:"text-[10px] px-1.5 py-0",children:e.channel?.type||"unknown"}),(0,n.jsx)(x.E,{variant:{open:"success",pending:"warning",resolved:"info",snoozed:"secondary"}[e.status],className:"text-[10px] px-1.5 py-0",children:e.status})]}),(0,n.jsx)("p",{className:"mt-1 text-xs text-muted-foreground truncate",children:e.last_message?.content?(0,j.xv)(e.last_message.content,50):"No messages yet"})]}),e.unread_count&&e.unread_count>0&&(0,n.jsx)("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-primary text-[10px] font-bold text-primary-foreground",children:e.unread_count>9?"9+":e.unread_count})]})}function W(){let[e,s]=(0,a.useState)(""),[t,h]=(0,a.useState)("all"),b=(0,g.VC)(),N=(0,g.j_)(e=>e.setActiveConversation),{data:w,isLoading:k}=(0,r.I)({queryKey:y.lH.conversations.list({search:e,status:t}),queryFn:()=>v.FH.get("/conversations",{...e&&{search:e},..."all"!==t&&{status:t}})}),A=w?.data||[];return(0,n.jsxs)("div",{className:"flex h-full",children:[(0,n.jsxs)("div",{className:"flex w-80 flex-col border-r border-border bg-card",children:[(0,n.jsx)(c.Y,{title:"Conversations"}),(0,n.jsxs)("div",{className:"border-b border-border p-3 space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.p,{placeholder:"Search conversations...",value:e,onChange:e=>s(e.target.value),leftIcon:(0,n.jsx)(i.A,{className:"h-4 w-4"}),className:"flex-1"}),(0,n.jsxs)(f.rI,{children:[(0,n.jsx)(f.ty,{asChild:!0,children:(0,n.jsx)(u.$,{variant:"outline",size:"icon",children:(0,n.jsx)(l.A,{className:"h-4 w-4"})})}),(0,n.jsxs)(f.SQ,{align:"end",children:[(0,n.jsx)(f.lp,{children:"Filter by Status"}),(0,n.jsx)(f.mB,{}),V.map(e=>(0,n.jsx)(f._2,{onClick:()=>h(e.value),className:(0,j.cn)(t===e.value&&"bg-primary/10 text-primary"),children:e.label},e.value))]})]})]}),"all"!==t&&(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)(x.E,{variant:"outline",className:"gap-1",children:["Status: ",t,(0,n.jsx)("button",{onClick:()=>h("all"),className:"ml-1 hover:text-foreground",children:"\xd7"})]})})]}),(0,n.jsx)(m.F,{className:"flex-1",children:(0,n.jsx)("div",{className:"p-2 space-y-1",children:k?Array.from({length:8}).map((e,s)=>(0,n.jsxs)("div",{className:"flex items-start gap-3 p-3",children:[(0,n.jsx)(p.EA,{className:"h-10 w-10 rounded-full"}),(0,n.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,n.jsx)(p.EA,{className:"h-4 w-32"}),(0,n.jsx)(p.EA,{className:"h-3 w-24"}),(0,n.jsx)(p.EA,{className:"h-3 w-48"})]})]},s)):A.length>0?A.map(e=>(0,n.jsx)(B,{conversation:e,isActive:b===e.id,onClick:()=>N(e.id)},e.id)):(0,n.jsxs)("div",{className:"py-12 text-center text-muted-foreground",children:[(0,n.jsx)(o.A,{className:"mx-auto h-8 w-8 opacity-50"}),(0,n.jsx)("p",{className:"mt-2 text-sm",children:"No conversations found"}),(0,n.jsx)("p",{className:"text-xs",children:"Start a new conversation or adjust filters"})]})})})]}),(0,n.jsx)("div",{className:"flex-1 flex flex-col",children:b?(0,n.jsx)(T,{conversationId:b}):(0,n.jsx)("div",{className:"flex-1 flex items-center justify-center bg-background",children:(0,n.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,n.jsx)(o.A,{className:"mx-auto h-12 w-12 opacity-50"}),(0,n.jsx)("p",{className:"mt-4 text-lg font-medium",children:"Select a conversation"}),(0,n.jsx)("p",{className:"text-sm",children:"Choose a conversation from the list to start chatting"})]})})})]})}},29142:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});let n=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/edsonmartins/desenvolvimento/linktor/web/admin/src/app/(dashboard)/conversations/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/edsonmartins/desenvolvimento/linktor/web/admin/src/app/(dashboard)/conversations/page.tsx","default")},30191:(e,s,t)=>{"use strict";t.d(s,{n:()=>d});var n=t(58009),a=t(66141),r=t(81432),i=t(40007),l=t(59529),o=class extends i.Q{#e;#s=void 0;#t;#n;constructor(e,s){super(),this.#e=e,this.setOptions(s),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let s=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.f8)(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),s?.mutationKey&&this.options.mutationKey&&(0,l.EN)(s.mutationKey)!==(0,l.EN)(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#r(e)}getCurrentResult(){return this.#s}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#a(),this.#r()}mutate(e,s){return this.#n=s,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(e)}#a(){let e=this.#t?.state??(0,a.$)();this.#s={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){r.jG.batch(()=>{if(this.#n&&this.hasListeners()){let s=this.#s.variables,t=this.#s.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#n.onSuccess?.(e.data,s,t,n)}catch(e){Promise.reject(e)}try{this.#n.onSettled?.(e.data,null,s,t,n)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#n.onError?.(e.error,s,t,n)}catch(e){Promise.reject(e)}try{this.#n.onSettled?.(void 0,e.error,s,t,n)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#s)})})}},c=t(64186);function d(e,s){let t=(0,c.jE)(s),[a]=n.useState(()=>new o(t,e));n.useEffect(()=>{a.setOptions(e)},[a,e]);let i=n.useSyncExternalStore(n.useCallback(e=>a.subscribe(r.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),d=n.useCallback((e,s)=>{a.mutate(e,s).catch(l.lQ)},[a]);if(i.error&&(0,l.GU)(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:d,mutateAsync:i.mutate}}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),n=s.X(0,[705,881,904,115,697,214,980,660,359,882],()=>t(49417));module.exports=n})();