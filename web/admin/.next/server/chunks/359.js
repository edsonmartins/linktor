exports.id=359,exports.ids=[359],exports.modules={17434:(e,t,r)=>{Promise.resolve().then(r.bind(r,58426))},57602:(e,t,r)=>{Promise.resolve().then(r.bind(r,33378))},33378:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var s=r(45512),n=r(58009),a=r(79334),o=r(73555),l=r(85757);let i=["/login","/forgot-password","/reset-password"];function c({children:e}){(0,a.useRouter)();let t=(0,a.usePathname)(),{isAuthenticated:r,refreshToken:c}=(0,o.nc)(),[d,u]=(0,n.useState)(!0),h=i.some(e=>t.startsWith(e));return d||!r&&!h||r&&h?(0,s.jsx)(l.Yh,{}):(0,s.jsx)(s.Fragment,{children:e})}var d=r(28531),u=r.n(d),h=r(80574),f=r(1372),m=r(64977),g=r(32514),b=r(4269),p=r(26814),x=r(79660),v=r(94520),w=r(20169),y=r(30722),j=r(99905),N=r(52706),k=r(44195),C=r(39400),S=r(67563),E=r(78447),A=r(3271),T=r(32323),_=r(53863);let P=[{label:"Dashboard",href:"/dashboard",icon:h.A},{label:"Conversations",href:"/conversations",icon:f.A,badge:!0},{label:"Contacts",href:"/contacts",icon:m.A},{label:"Channels",href:"/channels",icon:g.A},{label:"Knowledge Base",href:"/knowledge-base",icon:b.A},{label:"Flows",href:"/flows",icon:p.A},{label:"Analytics",href:"/analytics",icon:x.A}],R=[{label:"Settings",href:"/settings",icon:v.A}];function O(){let e=(0,a.usePathname)(),t=(0,o.Jd)(),{logout:r}=(0,o.nc)(),n=(0,_.hM)(),l=(0,_.U4)(),i=(0,_.j_)(e=>e.toggleSidebar);return(0,s.jsxs)("aside",{className:(0,k.cn)("relative flex h-screen flex-col border-r border-border bg-card transition-all duration-300",n?"w-16":"w-64"),children:[(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[!n&&(0,s.jsxs)(u(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,s.jsx)(w.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)("span",{className:"text-lg font-bold text-gradient",children:"LINKTOR"})]}),n&&(0,s.jsx)(u(),{href:"/dashboard",className:"mx-auto",children:(0,s.jsx)(w.A,{className:"h-6 w-6 text-primary"})})]}),(0,s.jsx)(T.w,{}),(0,s.jsx)("nav",{className:"flex-1 space-y-1 p-2",children:P.map(t=>{let r=e.startsWith(t.href),a=t.icon,o=(0,s.jsxs)(u(),{href:t.href,className:(0,k.cn)("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors",r?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-secondary hover:text-foreground",n&&"justify-center px-2"),children:[(0,s.jsx)(a,{className:"h-5 w-5 shrink-0"}),!n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:t.label}),t.badge&&l>0&&(0,s.jsx)(E.E,{variant:"error",className:"ml-auto",children:l>99?"99+":l})]}),n&&t.badge&&l>0&&(0,s.jsx)("span",{className:"absolute right-1 top-1 h-2 w-2 rounded-full bg-destructive"})]});return n?(0,s.jsx)(A.S9,{content:t.label,side:"right",children:(0,s.jsx)("div",{className:"relative",children:o})},t.href):(0,s.jsx)("div",{children:o},t.href)})}),(0,s.jsx)("div",{className:"space-y-1 p-2",children:R.map(t=>{let r=e.startsWith(t.href),a=t.icon,o=(0,s.jsxs)(u(),{href:t.href,className:(0,k.cn)("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors",r?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-secondary hover:text-foreground",n&&"justify-center px-2"),children:[(0,s.jsx)(a,{className:"h-5 w-5 shrink-0"}),!n&&(0,s.jsx)("span",{children:t.label})]});return n?(0,s.jsx)(A.S9,{content:t.label,side:"right",children:o},t.href):(0,s.jsx)("div",{children:o},t.href)})}),(0,s.jsx)(T.w,{}),(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsxs)("div",{className:(0,k.cn)("flex items-center gap-3 rounded-md p-2",n&&"justify-center"),children:[(0,s.jsx)(S.e,{src:t?.avatar_url,fallback:t?.name||"U",size:"sm",status:"online"}),!n&&(0,s.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,s.jsx)("p",{className:"truncate text-sm font-medium",children:t?.name}),(0,s.jsx)("p",{className:"truncate text-xs text-muted-foreground",children:t?.email})]})]}),n?(0,s.jsx)(A.S9,{content:"Logout",side:"right",children:(0,s.jsx)(C.$,{variant:"ghost",size:"icon",className:"mt-1 w-full",onClick:r,children:(0,s.jsx)(y.A,{className:"h-5 w-5"})})}):(0,s.jsxs)(C.$,{variant:"ghost",className:"mt-1 w-full justify-start gap-3 text-muted-foreground",onClick:r,children:[(0,s.jsx)(y.A,{className:"h-5 w-5"}),"Logout"]})]}),(0,s.jsx)("button",{onClick:i,className:"absolute -right-3 top-20 flex h-6 w-6 items-center justify-center rounded-full border border-border bg-card text-muted-foreground hover:bg-secondary hover:text-foreground",children:n?(0,s.jsx)(j.A,{className:"h-4 w-4"}):(0,s.jsx)(N.A,{className:"h-4 w-4"})})]})}var I=r(11948);function U({children:e}){return(0,s.jsx)(c,{children:(0,s.jsx)(I.fJ,{children:(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,s.jsx)(O,{}),(0,s.jsx)("main",{className:"flex-1 overflow-auto bg-background",children:e})]})})})}},67563:(e,t,r)=>{"use strict";r.d(t,{e:()=>d});var s=r(45512),n=r(58009),a=r(26729),o=r(21643),l=r(44195);let i=(0,o.F)("relative flex shrink-0 overflow-hidden rounded-full",{variants:{size:{default:"h-10 w-10",xs:"h-6 w-6",sm:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"}},defaultVariants:{size:"default"}}),c=(0,o.F)("flex h-full w-full items-center justify-center rounded-full bg-muted font-medium",{variants:{size:{default:"text-sm",xs:"text-[10px]",sm:"text-xs",lg:"text-base",xl:"text-lg"}},defaultVariants:{size:"default"}}),d=n.forwardRef(({className:e,size:t,src:r,alt:n,fallback:o,status:d,...u},h)=>(0,s.jsxs)("div",{className:"relative inline-flex",children:[(0,s.jsxs)(a.bL,{ref:h,className:(0,l.cn)(i({size:t}),e),...u,children:[(0,s.jsx)(a._V,{src:r,alt:n,className:"aspect-square h-full w-full object-cover"}),(0,s.jsx)(a.H4,{className:(0,l.cn)(c({size:t})),children:o?(0,l.IM)(o):n?(0,l.IM)(n):"?"})]}),d&&(0,s.jsx)("span",{className:(0,l.cn)("absolute bottom-0 right-0 rounded-full border-2 border-background","xs"===t&&"h-1.5 w-1.5","sm"===t&&"h-2 w-2",(!t||"default"===t)&&"h-2.5 w-2.5","lg"===t&&"h-3 w-3","xl"===t&&"h-4 w-4","online"===d&&"bg-terminal-green","offline"===d&&"bg-muted-foreground","busy"===d&&"bg-terminal-coral","away"===d&&"bg-terminal-yellow")})]}));d.displayName="Avatar"},78447:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(45512);r(58009);var n=r(21643),a=r(44195);let o=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground",outline:"text-foreground",success:"badge-success",warning:"badge-warning",error:"badge-error",info:"badge-info",whatsapp:"bg-green-500/20 text-green-400 border-green-500/30",telegram:"bg-blue-500/20 text-blue-400 border-blue-500/30",webchat:"bg-primary/20 text-primary border-primary/30",sms:"bg-purple-500/20 text-purple-400 border-purple-500/30"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,dot:r,pulse:n,children:l,...i}){return(0,s.jsxs)("div",{className:(0,a.cn)(o({variant:t}),e),...i,children:[r&&(0,s.jsx)("span",{className:(0,a.cn)("mr-1.5 h-1.5 w-1.5 rounded-full bg-current",n&&"animate-pulse")}),l]})}},39400:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(45512),n=r(58009),a=r(12705),o=r(21643),l=r(44195);let i=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 glow-primary",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",terminal:"bg-transparent border border-primary text-primary hover:bg-primary/10 font-mono"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,loading:o,children:c,disabled:d,...u},h)=>{let f=n?a.DX:"button";return(0,s.jsx)(f,{className:(0,l.cn)(i({variant:t,size:r,className:e})),ref:h,disabled:d||o,...u,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),c]}):c})});c.displayName="Button"},32323:(e,t,r)=>{"use strict";r.d(t,{w:()=>l});var s=r(45512),n=r(58009),a=r(39156),o=r(44195);let l=n.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},l)=>(0,s.jsx)(a.b,{ref:l,decorative:r,orientation:t,className:(0,o.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...n}));l.displayName=a.b.displayName},85757:(e,t,r)=>{"use strict";r.d(t,{Yh:()=>i,y$:()=>l});var s=r(45512),n=r(21643),a=r(44195);let o=(0,n.F)("animate-spin rounded-full border-2 border-current border-t-transparent",{variants:{size:{default:"h-5 w-5",sm:"h-4 w-4",lg:"h-8 w-8",xl:"h-12 w-12"},color:{default:"text-primary",muted:"text-muted-foreground",white:"text-white"}},defaultVariants:{size:"default",color:"default"}});function l({className:e,size:t,color:r,...n}){return(0,s.jsx)("div",{className:(0,a.cn)(o({size:t,color:r}),e),role:"status","aria-label":"Loading",...n,children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}function i(){return(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:(0,s.jsx)(l,{size:"xl"})})}},11948:(e,t,r)=>{"use strict";r.d(t,{Iw:()=>d,fJ:()=>c,y1:()=>l});var s=r(45512),n=r(58009),a=r(69586);let o=process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:8081/api/v1/ws",l={NEW_MESSAGE:"new_message",MESSAGE_UPDATED:"message_updated",CONVERSATION_UPDATED:"conversation_updated",CONVERSATION_CREATED:"conversation_created",TYPING:"typing",PRESENCE:"presence",ERROR:"error",CONNECTED:"connected"},i=(0,n.createContext)(null);function c({children:e}){let t=function(e={}){let{autoConnect:t=!0,reconnectAttempts:r=5,reconnectInterval:s=3e3,onConnect:i,onDisconnect:c,onError:d}=e,u=(0,n.useRef)(null),h=(0,n.useRef)(0),f=(0,n.useRef)(null),m=(0,n.useRef)(new Map),[g,b]=(0,n.useState)("disconnected"),[p,x]=(0,n.useState)([]),v=(0,n.useCallback)((e,t)=>(m.current.has(e)||m.current.set(e,new Set),m.current.get(e).add(t),()=>{m.current.get(e)?.delete(t)}),[]),w=(0,n.useCallback)((e,t)=>{let r=m.current.get(e);r&&r.forEach(e=>e(t))},[]),y=(0,n.useCallback)(e=>{u.current?.readyState===WebSocket.OPEN&&u.current.send(JSON.stringify(e))},[]),j=(0,n.useCallback)((e,t)=>{y({type:l.TYPING,payload:{conversation_id:e,is_typing:t}})},[y]),N=(0,n.useCallback)(()=>{let e=a.HM.getAccessToken();if(!e){console.warn("[WebSocket] No auth token available");return}if(u.current?.readyState===WebSocket.OPEN)return;b("connecting");let t=`${o}?token=${encodeURIComponent(e)}`;try{u.current=new WebSocket(t),u.current.onopen=()=>{console.log("[WebSocket] Connected"),b("connected"),h.current=0,i?.()},u.current.onmessage=e=>{try{let t=JSON.parse(e.data);if(t.type===l.CONNECTED){let e=t.payload;x(e.online_users||[])}if(t.type===l.PRESENCE){let e=t.payload;x(t=>"online"===e.status?t.includes(e.user_id)?t:[...t,e.user_id]:t.filter(t=>t!==e.user_id))}w(t.type,t.payload)}catch(e){console.error("[WebSocket] Failed to parse message:",e)}},u.current.onclose=()=>{console.log("[WebSocket] Disconnected"),b("disconnected"),c?.(),h.current<r&&(b("reconnecting"),h.current++,console.log(`[WebSocket] Reconnecting (${h.current}/${r})...`),f.current=setTimeout(()=>{N()},s))},u.current.onerror=e=>{console.error("[WebSocket] Error:",e),d?.(e)}}catch(e){console.error("[WebSocket] Failed to connect:",e),b("disconnected")}},[r,s,i,c,d,w]);return{connectionState:g,onlineUsers:p,connect:N,disconnect:(0,n.useCallback)(()=>{f.current&&(clearTimeout(f.current),f.current=null),h.current=r,u.current&&(u.current.close(),u.current=null),b("disconnected")},[r]),sendTyping:j,subscribe:v}}();return(0,s.jsx)(i.Provider,{value:t,children:e})}function d(){let e=(0,n.useContext)(i);if(!e)throw Error("useWebSocketContext must be used within a WebSocketProvider");return e}},69586:(e,t,r)=>{"use strict";r.d(t,{FH:()=>c,HM:()=>a});let s=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8081/api/v1";class n extends Error{constructor(e,t,r){super(`API Error: ${e} ${t}`),this.status=e,this.statusText=t,this.data=r,this.name="ApiError"}}let a={getAccessToken:()=>null,getRefreshToken:()=>null,setTokens:(e,t)=>{localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)},clearTokens:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}},o=[],l=[];async function i(e,t={}){let r={...t};for(let e of o)r=await e(r);let a=`${s}${e}`;if(r.params){let e=new URLSearchParams(r.params);a+=`?${e.toString()}`}let c=await fetch(a,{method:r.method||"GET",headers:{"Content-Type":"application/json",...r.headers},body:r.body?JSON.stringify(r.body):void 0});for(let e of l)c=await e(c);if(!c.ok){let e=await c.json().catch(()=>null);throw new n(c.status,c.statusText,e)}let d=await c.text();if(!d)return null;let u=JSON.parse(d);return u&&"object"==typeof u&&"success"in u&&"data"in u?u.data:u}o.push(e=>{let t=a.getAccessToken();return t&&(e.headers={...e.headers,Authorization:`Bearer ${t}`}),e});let c={get:(e,t)=>i(e,{method:"GET",params:t}),post:(e,t)=>i(e,{method:"POST",body:t}),put:(e,t)=>i(e,{method:"PUT",body:t}),patch:(e,t)=>i(e,{method:"PATCH",body:t}),delete:e=>i(e,{method:"DELETE"})}},73555:(e,t,r)=>{"use strict";r.d(t,{Jd:()=>l,nc:()=>o});var s=r(72803),n=r(19499),a=r(69586);let o=(0,s.v)()((0,n.Zr)((e,t)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(t,r)=>{e({isLoading:!0,error:null});try{let s=await a.FH.post("/auth/login",{email:t,password:r});a.HM.setTokens(s.access_token,s.refresh_token),e({user:s.user,isAuthenticated:!0,isLoading:!1})}catch(t){throw e({error:t instanceof Error?t.message:"Login failed",isLoading:!1,isAuthenticated:!1,user:null}),t}},logout:()=>{a.HM.clearTokens(),e({user:null,isAuthenticated:!1,error:null})},refreshToken:async()=>{let r=a.HM.getRefreshToken();if(!r){t().logout();return}try{let t=await a.FH.post("/auth/refresh",{refresh_token:r});a.HM.setTokens(t.access_token,t.refresh_token),e({user:t.user,isAuthenticated:!0})}catch{t().logout()}},setUser:t=>{e({user:t,isAuthenticated:!!t})},clearError:()=>{e({error:null})}}),{name:"auth-storage",storage:(0,n.KU)(()=>localStorage),partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})})),l=()=>o(e=>e.user)},53863:(e,t,r)=>{"use strict";r.d(t,{U4:()=>i,VC:()=>l,hM:()=>o,j_:()=>a});var s=r(72803),n=r(19499);let a=(0,s.v)()((0,n.Zr)(e=>({sidebarCollapsed:!1,sidebarMobileOpen:!1,activeConversationId:null,commandPaletteOpen:!1,unreadCount:0,toggleSidebar:()=>e(e=>({sidebarCollapsed:!e.sidebarCollapsed})),setSidebarCollapsed:t=>e({sidebarCollapsed:t}),setSidebarMobileOpen:t=>e({sidebarMobileOpen:t}),setActiveConversation:t=>e({activeConversationId:t}),toggleCommandPalette:()=>e(e=>({commandPaletteOpen:!e.commandPaletteOpen})),setCommandPaletteOpen:t=>e({commandPaletteOpen:t}),setUnreadCount:t=>e({unreadCount:t}),incrementUnread:()=>e(e=>({unreadCount:e.unreadCount+1})),clearUnread:()=>e({unreadCount:0})}),{name:"ui-storage",storage:(0,n.KU)(()=>localStorage),partialize:e=>({sidebarCollapsed:e.sidebarCollapsed})})),o=()=>a(e=>e.sidebarCollapsed),l=()=>a(e=>e.activeConversationId),i=()=>a(e=>e.unreadCount)},58426:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/edsonmartins/desenvolvimento/linktor/web/admin/src/app/(dashboard)/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/edsonmartins/desenvolvimento/linktor/web/admin/src/app/(dashboard)/layout.tsx","default")}};